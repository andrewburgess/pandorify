<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="sp://import/css/api.css" />
	<link rel="stylesheet" href="sp://import/css/eve.css" />
	<link rel="stylesheet" href="css/style.css" />
	<link rel="stylesheet" href="css/jquery-ui.css" />
	
	<script src="js/jquery.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script type="text/javascript">
		var sp = getSpotifyApi(1);
	</script>
	<script src="js/utility.js"></script>
	<script src="js/radio.js"></script>
	<script src="js/pandorify.js"></script>
	<script type="text/javascript">
		
		var echonest = sp.require("js/echonest");	
		
		$(document).ready(function() {	
			initialize();
			
			$("#radio-search").val("");
			setupSearchContainers();
			
			$("#radio").hide();
			$("#radio-search").keyup(Autocompleter.interceptKeypress);
			
			$("#session-info").dialog({ autoOpen: false, maxWidth: Math.round($(document).width() * 0.8), maxHeight: Math.round($(document).height() * 0.9) });
			$("#session-info-button").click(function() {
				$("#session-info").dialog("open");
			});
			
			if (!(sp.trackPlayer.getPlayingContext()[0] === radio.tempPlaylist.uri)) {
				window.location = "spotify:app:pandorify:create";
			} else {
				window.location = "spotify:app:pandorify:radio";
			}
		});		
	</script>
</head>
<body>
	<div id="container">
		<div id="header">
			<h1>Pandorify</h1>
		</div>
		<div id="page">
			<div id="create-station">
				<h2>Create a Station</h2>
				<p>Pandorify uses the EchoNest platform to find you awesome new tunes based on the information you provide</p>
				<div id="search-area">
					<input id="radio-search" type="search" class="input" placeholder="Search for artists, songs, or descriptions..." />
				</div>
				<div id="result-area">
					<div class="right result-container">
						<h3>Description Matches</h3>
						<div id="description-results"></div>
					</div>
					<div id="spotify-container" class="result-container">
						<h3>Spotify Matches</h3>
						<div id="spotify-results"></div>
					</div>
				</div>
			</div>
			
			<div id="radio">
				<button id="session-info-button" class="button">
					Show Session Info
				</button>
				<h2>Listening to Radio <span></span></h2>
				<div class="clear"></div>
				<div id="current-playing">
					<div id="ban-buttons">
						<button id="ban-artist" class="button">Ban Artist</button>
						<button id="ban-track" class="button">Ban Track</button>
					</div>
					<div id="artist-image"></div>
					<div id="track-info">
						<div id="track-name"></div>
						<div id="artist-name"></div>
					</div>
					<div class="clear"></div>
				</div>
				<div id="play-history">
				
				</div>
			</div>
		</div>
	</div>
	
	<div id="session-info" title="Session Info">
		<div id="session-info-content">
			<div id="session-terms">
				
			</div>
		</div>
	</div>
	
</body>
</html>